import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.regex.Pattern;

import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;

class ZombieCamConnectHandler implements HttpHandler {
		public void handle(HttpExchange t) throws IOException {

			BufferedReader input = new BufferedReader(new InputStreamReader(t.getRequestBody()));
			String[] payload = input.readLine().split(Pattern.quote("$$$"));
			System.out.println("streamname: " + payload[0]);
			System.out.println("data: " + payload[1]);

			t.sendResponseHeaders(200, 0);
			input.close();
			t.close();

			doRemoteMethod(payload[0], payload[1]);
		}
	}
